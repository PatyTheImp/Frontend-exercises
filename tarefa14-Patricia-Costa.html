<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarefa 14 - Estruturas de Repetição V1</title>

    <script>

        function mediaFunc() {

            var inputMedia = document.getElementById("txtMedia");
            var div = document.getElementById("divMedia");

            var media = parseFloat(inputMedia.value);
            var num; //Variável para o número de inteiros
            var sum = 0; //Variável para o somatório desses inteiros

            //Para impedir que se insira um número menor ou igual a 0
            if (media <= 1)
                div.innerHTML = "<h3>Input inválido. Insira um número positivo maior que 1.</h3>";
            else {
                //No caso de se inserir números com casas decimais
                if (media == Math.floor(media))
                    num = media - 1;
                else    
                    num = Math.floor(media);

                for (var i = num; i > 0; i--) 
                    sum += i;

                var mediaFinal = sum / num;

                div.innerHTML = "<h3>A média dos valores inteiros positivos inferiores ao número inserido é igual a " + mediaFinal + "</h3>";
            }
        }

        function fatorialFunc() {

            var inputFatorial = document.getElementById("txtFatorial");
            var div = document.getElementById("divFatorial");
            
            var fatorial = parseFloat(inputFatorial.value);
            var fatorialFinal = 1;

            //Para impedir que se insira números negativos ou com casas decimais
            if (fatorial < 0 || fatorial != Math.floor(fatorial))
                div.innerHTML = "<h3>Input inválido. Insira um número inteiro maior ou igual a 0.</h3>";
            else {
                if (fatorial == 0)
                    fatorialFinal = 1; //0! = 1
                else {    
                    for (var i = fatorial; i > 0; i--)
                        fatorialFinal *= i;
                }
                div.innerHTML = "<h3>" + fatorial + "! = " + fatorialFinal + "</h3>";
            } 
        }

        function algarismosFunc() {

            var inputNumero = document.getElementById("txtNumero");
            var div = document.getElementById("divAlgarismos");

            var numero = parseFloat(inputNumero.value);
            var algarismos = 1;

            //Para impedir que se insira números com casas decimais
            if (numero != Math.floor(numero))
                div.innerHTML = "<h3>Input inválido. Insira um número inteiro.</h3>";
            else {
                if (numero < 0) {
                    for (var i = 10; numero + i <= 0; i *= 10)
                        algarismos++;
                }
                else {
                    for (var i = 10; numero - i >= 0; i *= 10)
                        algarismos++;
                }

               algarismos == 1 ?  div.innerHTML = "<h3>O número " + numero + " tem " + algarismos + " algarismo.</h3>" : div.innerHTML = "<h3>O número " + numero + " tem " + algarismos + " algarismos.</h3>";
            }
        }

        function potenciaFunc() {

            var inputBase = document.getElementById("txtBase");
            var inputExpoente = document.getElementById("txtExpoente");
            var div = document.getElementById("divPotencia");

            var base = parseFloat(inputBase.value);
            var expoente = parseFloat(inputExpoente.value);
            var potencia = 1;

            //É possivel calcular uma potência com um expoente fractionário mas acredito que se possa ignorá-los para esta tarefa
            if (expoente != Math.floor(expoente))
                div.innerHTML = "<h3>Input inválido. Insira um expoente inteiro.</h3>";
            else {
                if (expoente < 0) {
                    expoente = -1 * expoente;
                    
                    for (i = 1; i <= expoente; i++) { // i = i + 1
                        potencia *= base; // potencia = potencia * base
                    }
                    potencia = 1 / potencia;
                }   
                else if (expoente > 0) {
                    for (i = 1; i <= expoente; i++) {
                        potencia *= base;
                    }
                }
                div.innerHTML = "<h3>Resultado: " + potencia + "</h3>"; 
            } 
        }
    </script>

</head>
<body>
    
    <h1>Média</h1>

    <input type="number" id="txtMedia" placeholder="NÚMERO POSITIVO">
    <button onclick="mediaFunc();">EXECUTAR</button>

    <div id="divMedia"></div>


    <h1>Fatorial</h1>

    <input type="number" id="txtFatorial" placeholder="INTEIRO POSITIVO">
    <button onclick="fatorialFunc();">EXECUTAR</button>

    <div id="divFatorial"></div>
    

    <h1>Algarismos em um número</h1>

    <input type="number" id="txtNumero" placeholder="NÚMERO INTEIRO">
    <button onclick="algarismosFunc();">EXECUTAR</button>

    <div id="divAlgarismos"></div>


    <h1>Potência</h1>

    <input type="number" id="txtBase" placeholder="BASE">
    <input type="number" id="txtExpoente" placeholder="EXPOENTE">
    <button onclick="potenciaFunc();">EXECUTAR</button>

    <div id="divPotencia"></div>
</body>
</html>